<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
	<div class="panel <%=@cat.panel%>">
		<div class="panel-heading click-heading">
			<div class="panel-title">
				<b><%=@cat.title%></b>
				<span class="pull-right clickable">
					<i class="mt5 glyphicon glyphicon-chevron-up"></i>
				</span>
			</div> 
		</div>
		<div class="panel-body"> 
			<div class="row" id="fields" style="word-wrap: break-word">
				<%all_record_fields = @record
					.record_fields
					.map{|sf| [sf.fields_id, sf] }.to_h%>
				<%@cat.fields.each do |field|%>
					<%record_field = all_record_fields[field.id]%>
					<%if record_field.present? && record_field.value.present?%>
						<%size = "col-xs-" + field.display_size.to_s%>
						<div class="<%=size%>">
							<b><%=field.label.html_safe%>: </b>
							<%value = record_field.present? ? record_field.value : ""%>

							<%if (field.display_type == "checkbox" || field.display_type == "radio")%>
								<%value.split(";").each do |x|%>
									<div class="col-xs-12">
										<span class="glyphicon glyphicon-check" aria-hidden="true"></span> <%=x%>
									</div>
								<%end%>

							<%elsif field.display_type == "textarea"%>
								</br><%=value.gsub(/\n/, '<br/>').html_safe%>

							<%elsif field.display_type == "employee"%>
								<%if value.match(/\A[+-]?\d+?(\.\d+)?\Z/)%>
									<%=User.find(value).full_name%>
								<%else%>
									<%=value%>
								<%end%>

							<%else%>
								<%=value%>
							<%end%>

						</div>
					<%end%>
				<%end%>      
			</div>
		</div>
	</div>
</div>



<style>
	.smallselect {
		position: relative;
		top: 50%;
		transform: translateY(-50%);
	}
</style>
