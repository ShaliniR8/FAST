<div class="panel-warning">
  <div class="panel-heading">
    <div class="panel-title">Add SRAs
    <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close"><span class="glyphicon glyphicon-remove"></span></button></div>
  </div>
  <div class="panel-body" style="max-height:500px;overflow-y:auto;">
    <table class="table table-striped table-bordered" id="sras_table">
      <thead>
        <tr>
          <%@sra_headers.each do |h|%>
            <th><%=h[:title]%></th>
          <%end%>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <%@sras.each do |p|%>
          <tr>
            <%@sra_headers.each do |h|%>
              <td><%=p.send(h[:field])%></td>
            <%end%>
            <td><%=check_box_tag "sras[]",p.id,false,:class=>"add_sra"%></td>
          </tr>
        <%end%>
      </tbody>
    </table>
    <%=form_tag sras_srm_meeting_path(@meeting),:method=>"post" do%>
      <%=submit_tag "Submit",:class=>"btn btn-success pull-right", :disable_with => "Submitting..."%>
    <%end%>
  </div>
</div>
<script>
  $(document).ready(function(){
    var dt = $("#sras_table").DataTable();
    $('form').on('submit',function(){
      var form = $(this);
      dt.rows().nodes().to$().each(function(){
        form.append($(this).find(".add_sra"));
      });
    });
  });
</script>
