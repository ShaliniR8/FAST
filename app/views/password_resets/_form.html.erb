<script type="text/javascript" src="/javascripts/utility/nested_fields.js"></script>
<script type="text/javascript" src="/javascripts/utility/delete.js"></script>
<link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap/dataTables.bootstrap.min.css"/>
<div class="item active mt50" id="test2?" style="height:auto;">
   <div class="grid per90 center-block">
    <div class="col-lg-12">
      <%if flash[:error] %>
      <div class="panel panel-danger" id="error_panel">
        <div class="panel-heading">
          <div class="panel-title">
              <b>Error</b>
          </div>
        </div >
        <div class="panel-body" id="errors">
          <div style="color:red">
            <%if flash[:error].kind_of?(Array)%>
              <%flash[:error].each do |x| %>
                <b>*<%=x%></b></br>
              <%end%>
            <%else%>
              <b>*<%=flash[:error]%></b></br>
            <%end%>
          </div>
        </div>
      </div>
    <%end%>
    <div class="panel panel-info">
        <div class="panel-heading">
            <div class="panel-title"><b><%=((@action == "new")? "New User" : "Edit Profile")%></b></div >
        </div>
        <div class="panel-body">
            <%= form_for @user,:html => {:multipart => true}  do |f| %>

              <%if @authorized%>
                <div class="form-group col-xs-12"><h4><b>Account Information</b></h4></div>

                <div class="form-group form-inline col-xs-12">
                  <div class="col-xs-4"><label for="username">Username<b style="color:red">*</b></label></div>
                  <%=f.text_field :username, {:class=>"form-control required"}%>
                </div>

                  <%if @action=="self_edit"%>

                    <div class="form-group form-inline col-xs-12">
                      <div class="col-xs-4"><b>Enter Password for Validation</b><b style="color:red">*</b></div>
                      <input class="form-control required" type="password" size="30" id="pw" name="pw"/>
                  </div>

                <%else%>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><label for="level">Account Type<b style="color:red">*</b></label></div>
                    <%=f.select :level, options_for_select(@levels,@user.level),{:include_blank=>""} ,{:class=>"form-control required"}%>
                  </div>

                <%if @action=="new"%>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><label for="password">Password<b style="color:red">*</b></label></div>
                      <%=f.password_field :password, {:class=>"form-control required_field password pass"}%>
                    </div>
                    <div class="form-group form-inline col-xs-12">
                      <div class="col-xs-4"><label for="password">Confirm Password<b style="color:red">*</b></label></div>
                      <%=f.password_field :password_confirmation, {:class=>"form-control required_field password pass_confirm"}%>
                    </div>
                <%else%>
                  <div class="form-group form-inline col-xs-12">
                      <div class="col-xs-4"><%=f.label :password, "New Password"%></div>
                      <%=f.password_field :password, {:class=>"form-control password pass"}%>
                    </div>
                    <div class="form-group form-inline col-xs-12">
                      <div class="col-xs-4"><%=f.label :password, "Confirm New Password"%></div>
                      <%=f.password_field :password_confirmation, {:class=>"form-control password pass_confirm"}%>
                    </div>
                <%end%>

                <%end%>


                  <div class="form-group col-xs-12">
                  <hr><h4><b>Account Details</b></h4>
            </div>
            <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><%=f.label :employee_number, "Employee Number"%></div>
                    <%=f.text_field :employee_number, {:class=>"form-control"}%>
                  </div>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><label for="first_name">First Name<b style="color:red">*</b></label></div>
                    <%=f.text_field :first_name, {:class=>"form-control required"}%>
                  </div>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><label for="last_name">Last Name<b style="color:red">*</b></label></div>
                    <%=f.text_field :last_name, {:class=>"form-control required"}%>
                  </div>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><label for="email">Email<b style="color:red">*</b></label></div>
                    <%=f.text_field :email, {:class=>"form-control required"}%>
                  </div>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><%=f.label :job_title, "Job Title"%></div>
                    <%=f.text_field :job_title, {:class=>"form-control"}%>
                  </div>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><%=f.label :address, "Address"%></div>
                    <%=f.text_field :address, {:class=>"form-control"}%>
                  </div>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><%=f.label :city, "City"%></div>
                    <%=f.text_field :city, {:class=>"form-control"}%>
                  </div>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><%=f.label :state, "State"%></div>
                    <%=f.text_field :state, {:class=>"form-control"}%>
                  </div>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><%=f.label :zipcode, "Zipcode"%></div>
                    <%=f.text_field :zipcode, {:class=>"form-control"}%>
                  </div>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><%=f.label :mobile_number, "Mobile Number"%></div>
                    <%=f.text_field :mobile_number, {:class=>"form-control"}%>
                  </div>
                  <div class="form-group form-inline col-xs-12">
                    <div class="col-xs-4"><%=f.label :work_phone_number, "Work Phone Number"%></div>
                    <%=f.text_field :work_phone_number, {:class=>"form-control"}%>
                  </div>

                  <input type="hidden" name="page" value="<%=@action%>"/>
                  <div class="form-actions pull-right"><%= f.submit "Save", class:"btn btn-success", disable_with: "Saving..."%></div>
                  <%=link_to "Cancel",(@action=="new")? users_path : user_path(@user) , :id=>"cancel-btn", :class=>"mr5 btn btn-warning pull-right"%>
                  <%#=link_to "Cancel",user_path(@user) , :id=>"cancel-btn", :class=>"mr5 btn btn-warning pull-right"%>
              <%end%>
          <%end%>
        </div>
      </div>
    </div>
  </div>
</div>


