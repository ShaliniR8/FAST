<% associated_reports = @associated_reports || [] %>
<div class="table-responsive mt10">
  <table id="reports" class="table table-striped table-bordered">
    <thead>
      <tr>
        <%@report_headers.each do |header|%>
          <th>
            <%=header[:title]%>
          </th>
        <%end%>
          <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <%@reports.includes(:records).each do |report|%>
        <tr report="<%=report.id%>">
          <%@report_headers.each do |header|%>
            <% if header[:type] == "date" %>
              <% if params[:action] == "edit" %>
                <td><%=date_to_string(Date.parse report.send(header[:field]))%></td>
              <% else %>
                <td><%=date_to_string(report.send(header[:field]))%></td>
              <% end %>
            <% else %>
              <td><%=report.send(header[:field])%></td>
            <% end %>
          <%end%>
          <%unless associated_reports.include? report.id%>
            <td><a class="btn btn-info add_btn">Add</a></td>
          <%else%>
            <td><a class="btn btn-success disabled"> Added </a></td>
          <%end%>
        </tr>
      <%end%>
    </tbody>
  </table>
</div>





