<div class="panel-primary">
  <div class="panel-heading">
    <div class="panel-title"><b>Users with privilege <%=@privilege.name%></b>
    <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close"><span class="glyphicon glyphicon-remove"></span></button></div>
  </div>
  <div class="panel-body">
    <div class="row">
      <table class="table table-striped table-bordered" id="ut">
        <thead>
          <tr>
            <%@headers.keys.each do |k|%>
                <th><%=k%></th>
            <%end%>
          </tr>
        </thead>
        <tbody>
          <%@privilege.users.each do |u|%>
            <%if u.present?%>
              <tr uid="<%=edit_privilege_user_path(u)%>" class="ptr">
                <%@headers.values.each do |v|%>
                  <td><%=u.send(v)%></td>
                <%end%>
              </tr>
            <%end%>
          <%end%>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script>
  $(document).ready(function(){
    $('.ptr').on('click',function(){
      window.location=$(this).attr('uid');
    });
      $('#ut').DataTable({
        dom: "<'row'<'col-sm-6'B><'col-sm-6'f>>" +
          "<'row'<'col-sm-12'tr>>" +
          "<'row'<'col-sm-4'i><'col-sm-4 text-center'l><'col-sm-4'p>>",
        buttons: ['copy', 'csv', 'excel', 'print'],
        "aLengthMenu": [[5, 10, 15, -1], [5, 10, 15, "All"]],
        "iDisplayLength": 10,
        "drawCallback": function(settings){
          $(".modal-content").css("max-height", "")
        }
      });
  });
</script>
