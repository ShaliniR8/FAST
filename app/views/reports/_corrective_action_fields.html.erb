<tr>
  <td>
    <%=text_field_tag 'Scheduled Completion Date', "", :type=>'date',:class=>"form-control required_field corrective_action_due_date"%>
  </td>
  <td><%=select_tag 'department',options_for_select(@department),:include_blank=>true,:class=>"form-control corrective_action_department"%></td>
  <td><%=text_field_tag 'description',"",:class=>"form-control corrective_action_description"%></td>
  <td><%=select_tag "station",options_for_select(@station),:include_blank=>true,:class=>"form-control corrective_action_station"%></td>
  
  <%=hidden_field_tag 'reports_id',:value=>@report.id%>
  <%=hidden_field_tag 'created_by_id',:value=>current_user.id%>
  <td></td>
</tr>

<script type="text/javascript">
 $(document).ready(function(){
  timestamp = Date.now()
  $(".corrective_action_due_date").last().attr('name',"dueDate_"+timestamp)
  $(".corrective_action_department").last().attr('name',"department_"+timestamp)
  $(".corrective_action_description").last().attr('name',"description_"+timestamp)
  $(".corrective_action_station").last().attr('name',"designee_"+timestamp)

  $("form").on('submit',function(){
      $(this).find('.required_field').each(function(){
        if ($(this).val()=="")
        {
          $(".required_field").css('border-color', 'red');
              event.preventDefault();
        }
      });
    });
 });
</script>
