<div class="col-xs-12">
  <div class="panel panel-warning">
    <div class="panel-heading">
      <div class="panel-title">
        <div class='top_text'>
          News
        </div>
        <div class='top_buttons pull-right'>
          <%=link_to 'View All', notices_path, class: 'btn btn-default'%>
        </div>
      </div>
    </div>
    <div class="panel-body" style="height:250px;overflow-y:auto;overflow-x:hidden">
      <table id='notices_table' class='table table-hover table-striped'>
        <tbody>
          <%@notices.each do |notice|%>
            <tr data-link="<%=read_message_notice_path(notice)%>">
              <td><%=sanitize notice.content.html_safe%></td>
              <td style='text-align:right'>
                <%=time_ago_in_words(notice.created_at).scan(/\w+/).join(' ')%> ago
              </td>
            </tr>
          <%end%>
        </tbody>
      </table>
    </div>
  </div>
</div>


<script>
  $(function(){
    $("tr[data-link]").click(function() {
      window.open($(this).data('link'), '_blank');
      $(this).hide();
    });


    $('.mark_all_read').on('click', function() {
      $('tr').hide();
    });

  });
</script>
