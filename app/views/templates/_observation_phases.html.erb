<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"%>
	<div class="panel <%=cat.panel%>">
		<div class="panel-heading click-heading collapsed">
			<div class="panel-title">
				<b><%=cat.title%> <font color="grey">(#<%=cat.id%>)</font></b>
				<span class="pull-right clickable"><i class="mt5 glyphicon glyphicon-chevron-down"></i></span>
			</div> 
		</div>
		<div class="panel-body" style="display:none" > 
			<div class="row" id="fields" style="word-wrap: break-word">
				<div class="col-xs-12">
					<div class="table-responsive">
						<table id="observation_phases_table" class="table table-hover table-striped table-bordered" width="100%">
							<thead>
								<tr>
									<th>Observation Phase</th>
									<th>Condition</th>
									<th>Threat</th>
									<th>Sub Threat</th>
									<th>Error</th>
									<th>Sub Error</th>
									<th>Human Factor</th>
									<th>Comment</th>
								</tr>
							</thead>
							<tbody>
								<%cat.fields.where(deleted: false).order(:field_order).group_by(&:element_id).each do |element_id, arr|%>
									<tr>
										<th><%=arr.first.label%></th>
										<%arr.each do |field|%>
											<%if field.display_type == "dropdown"%>
												<td>
													<select  class="form-control" id="preview_select" name="preview_select">
														<%field.getOptions.each do |option|%>
															<option><%=option%></option>
														<%end%>
													</select>
												</td>

											<%elsif field.display_type == "text"%>
												<td><input type="text" class="form-control <%= (field.data_type=='date'|| field.data_type=='datetime') ? 'field-'+field.data_type : ''%>" placeholder="<%=field.label%>" <%= field.data_type == 'date' ? 'Readonly' : ''%>></td>

											<%end%>
										<%end%>
									</tr>
								<%end%>
							</tbody>
						</table>
					</div>   
				</div> 
			</div>
		</div>
	</div>
</div>



<style>
	.smallselect {
		position: relative;
		top: 50%;
		transform: translateY(-50%);
	}
</style>


