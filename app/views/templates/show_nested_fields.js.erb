swal.close();

swal({

  title: "<%=@field.label%>",
  html: "<%=escape_javascript render('/templates/show_nested_fields')%>",
  customClass: "custom-swal",
  showCancelButton: false,
  showConfirmButton: false,
  allowOutsideClick: false,
  onOpen: function(){


    // Archive/Unarchive button
    $(".archive_btn").on("click", function(){
      if($(this).text() == "Archive"){
        $(this).closest("td").find("#delete_field").val(true);
        $(this).text("Unarchive");
        $(this).removeClass("btn-warning").addClass("btn-default");
      }else{
        $(this).closest("td").find("#delete_field").val(false);
        $(this).text("Archive");
        $(this).removeClass("btn-default").addClass("btn-warning");
      }
    });


  }

}).catch(swal.noop);



function removeField(deletable){
  $(deletable).closest('.to_delete').remove();
}

//function to add nested attributes
function add_fields(link, association, content, target) {
  var new_id = new Date().getTime();
  var regexp = new RegExp("new_" + association, "g")
  var insertposition="#"+target;
  $(content.replace(regexp, new_id)).appendTo($(link).closest(".panel-body").find(insertposition));


}

function closeSwal() {
  swal.close();
}
